<div id="details"></div>
<meta http-equiv="refresh" content="4">
<script>
  let recount = 0;
  const options = {
    enableHighAccuracy: true,
    timeout: 5000,
    maximumAge: 0,
  };
  navigator.geolocation.watchPosition(successCallback, errorCallback, options);

  function successCallback(position) {
    const { accuracy, latitude, longitude, altitude, heading, speed } =
      position.coords;
    recount++;
    details.innerHTML = 'Accuracy: ' + accuracy + '<br>';
    details.innerHTML +=
      'Latitude: ' + latitude + ' | Longitude: ' + longitude + '<br>';
    details.innerHTML += 'Altitude: ' + altitude + '<br>';
    details.innerHTML += 'Heading: ' + heading + '<br>';
    details.innerHTML += 'Speed: ' + speed + '<br>';
    details.innerHTML += 'Recount: ' + recount + '<br>';
    const log = function () {
      let a = document.createElement('a');
      a.href = window.URL.createObjectURL(
        new Blob(
          [
            `${"accuracy: "+accuracy}\n${"latitude: "+latitude}\n${"longitude: "+longitude}\n${"altitude: "+altitude}\n${"heading: "+heading}\n${"speed: "+speed}`,
          ],
          {
            type: 'text/plain',
          }
        )
      );
      a.download = dateTime + '.txt';
      a.click();
      console.log('The data was appended to log!');
    };
    setTimeout(log, 3000);
  }
  function errorCallback(error) {
    details.innerHTML = 'Error: ' + error.code + ' ' + error.message;
  }

  if (((latitude = 56.8379199), (longitude = 60.66073))) {
    //alert("you are almost home")
  }
  var today = new Date();
  var date = today.getFullYear()+'-'+(today.getMonth()+1)+'-'+today.getDate();
  var time = today.getHours() + ":" + today.getMinutes() + ":" + today.getSeconds();
  var dateTime = date+' '+time;
  console.log(dateTime)
</script>